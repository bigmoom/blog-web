<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="google-site-verification" content="_i0mgfxBy6QPgJZLx5NbYfLAp5i5xqHoSKIcpYOPHM0" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="_i0mgfxBy6QPgJZLx5NbYfLAp5i5xqHoSKIcpYOPHM0">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.caiwanghui.top","root":"/","scheme":"Mist","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Springboot 整合 Mybatis 简介  MyBatis 是一款优秀的持久层框架，它支持自定义 SQL、存储过程以及高级映射。 MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。 MyBatis 可以通过简单的 XML 或注解来配置和映射原始类型、接口和 Java POJO（Plain Old Java Objects)为数据库中的记录。  简单来说，myb">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot整合mybatis">
<meta property="og:url" content="http://www.caiwanghui.top/2021/06/15/SpringBoot%E6%95%B4%E5%90%88mybatis/index.html">
<meta property="og:site_name" content="菜鸡肥肥的私人博客">
<meta property="og:description" content="Springboot 整合 Mybatis 简介  MyBatis 是一款优秀的持久层框架，它支持自定义 SQL、存储过程以及高级映射。 MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。 MyBatis 可以通过简单的 XML 或注解来配置和映射原始类型、接口和 Java POJO（Plain Old Java Objects)为数据库中的记录。  简单来说，myb">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162522.png">
<meta property="og:image" content="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162359.png">
<meta property="og:image" content="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162448.png">
<meta property="og:image" content="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162623.png">
<meta property="og:image" content="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162720.png">
<meta property="og:image" content="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162905.png">
<meta property="og:image" content="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162930.png">
<meta property="og:image" content="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162823.png">
<meta property="og:image" content="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162839.png">
<meta property="article:published_time" content="2021-06-14T22:12:25.000Z">
<meta property="article:modified_time" content="2021-06-14T14:46:17.346Z">
<meta property="article:author" content="Wanghui Cai">
<meta property="article:tag" content="springboot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162522.png">

<link rel="canonical" href="http://www.caiwanghui.top/2021/06/15/SpringBoot%E6%95%B4%E5%90%88mybatis/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>SpringBoot整合mybatis | 菜鸡肥肥的私人博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">菜鸡肥肥的私人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.caiwanghui.top/2021/06/15/SpringBoot%E6%95%B4%E5%90%88mybatis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Wanghui Cai">
      <meta itemprop="description" content="一些零零散散的学习总结">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="菜鸡肥肥的私人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          SpringBoot整合mybatis
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-06-14 22:12:25 / 修改时间：14:46:17" itemprop="dateCreated datePublished" datetime="2021-06-14T22:12:25Z">2021-06-14</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>9.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>9 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1>Springboot 整合 Mybatis</h1>
<h3 id="简介">简介</h3>
<blockquote>
<p><code>MyBatis</code> 是一款优秀的持久层框架，它支持自定义 <code>SQL</code>、存储过程以及高级映射。</p>
<p><code>MyBatis</code> 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。</p>
<p><code>MyBatis</code> 可以通过简单的 XML 或注解来配置和映射原始类型、接口和 <code>Java POJO（Plain Old Java Objects)</code>为数据库中的记录。</p>
</blockquote>
<p>简单来说，<code>mybatis</code>作用和之前<code>spring data jpa</code>类似，都是实现数据库中数据与实体类的映射。</p>
<a id="more"></a>
<h3 id="使用示例">使用示例</h3>
<p><a href="https://github.com/bigmoom/springboot/tree/main/springboot%E6%95%B4%E5%90%88mybatis" target="_blank" rel="noopener">程序源码</a></p>
<h5 id="建表">建表</h5>
<p>我们这里首先简单构建<code>customer</code>表，该表有<code>id</code>,<code>name</code>,<code>age</code>,<code>create_time</code>,<code>modify_time</code>属性，其中主键为<code>id</code>，递增。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`customer`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`customer`</span>(</span><br><span class="line"><span class="string">`id`</span> <span class="built_in">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'id'</span>,</span><br><span class="line"><span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'姓名'</span>,</span><br><span class="line"><span class="string">`age`</span> <span class="built_in">SMALLINT</span>(<span class="number">3</span>)  <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'年龄'</span> ,</span><br><span class="line"><span class="string">`create_time`</span> <span class="built_in">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line"><span class="string">`modify_time`</span> <span class="built_in">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span>(<span class="string">`id`</span>)</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>
<h4 id="pom-xml">pom.xml</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--数据库连接--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="application-yml">application.yml</h4>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8090</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/customer?useUnicode=true&amp;characterEncoding=utf-8&amp;allowMultiQueries=true&amp;serverTimezone=GMT%2B8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">1234</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment">#设置实体类包名，这样mapper.xml中就可以使用实体类类名</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.cwh.springboot.springboot_mybatis.dao.entity</span></span><br><span class="line">  <span class="comment">#设置mapper存放位置,匹配以Mapper.xml结束的文件</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*Mapper.xml</span></span><br><span class="line">  <span class="comment">#开启驼峰匹配</span></span><br><span class="line"><span class="comment">#  configuration:</span></span><br><span class="line"><span class="comment">#    map-underscore-to-camel-case: true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里虽然说是添加了<code>type-aliases-package</code>，但是实际使用时<code>mapper.xml</code>还是会识别不到实体类，所以添加<code>resources/mapper/Util.xml</code>工具配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> 注意: 这个配置文件并不会被实际使用到, 写这个文件仅仅是为了让 IDEA 的 Mybatis 插件找到实体类的位置</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.cwh.springboot.springboot_mybatis.dao.entity"</span>/&gt;</span> <span class="comment">&lt;!--替换成你的项目的实体类的路径--&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="Entity">Entity</h4>
<p>因为这次只是简单介绍<code>mybatis</code>的<code>CRUD</code>操作，所以还是使用单个<code>Customer</code>实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="keyword">private</span> Date modifyTime;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="VO">VO</h4>
<h5 id="ResultVO">ResultVO</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@JsonInclude</span>(JsonInclude.Include.NON_NULL)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResultVO</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ResultVO</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(ResultCode.SUCCESS, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ResultVO</span><span class="params">(T data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(ResultCode.SUCCESS, data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ResultVO</span><span class="params">(ResultCode resultCode,T data)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = resultCode.getCode();</span><br><span class="line">        <span class="keyword">this</span>.msg = resultCode.getMsg();</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="CustomerVO">CustomerVO</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerVO</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date createDt;</span><br><span class="line">    <span class="keyword">private</span> Date modifyDt;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomerVO</span><span class="params">(Customer customer)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = customer.getId();</span><br><span class="line">        <span class="keyword">this</span>.name = customer.getName();</span><br><span class="line">        <span class="keyword">this</span>.age = customer.getAge();</span><br><span class="line">        <span class="keyword">this</span>.createDt = customer.getCreateTime();</span><br><span class="line">        <span class="keyword">this</span>.modifyDt = customer.getModifyTime();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这次我使用了一个枚举类<code>ResultCode</code>以集中设置我的返回信息码和信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> ResultCode &#123;</span><br><span class="line"></span><br><span class="line">    SUCCESS(<span class="number">0000</span>,<span class="string">"操作成功"</span>),</span><br><span class="line">    <span class="comment">//其余为权限验证，登录验证时候使用，暂时没有用到</span></span><br><span class="line">    UNAUTHORIZED(<span class="number">1001</span>,<span class="string">"没有登录"</span>),</span><br><span class="line">    FORBIDDEN(<span class="number">1002</span>,<span class="string">"没有权限"</span>),</span><br><span class="line">    VALIDATE_FAILED(<span class="number">1003</span>,<span class="string">"参数校验失败"</span>),</span><br><span class="line">    FAILED(<span class="number">1004</span>,<span class="string">"接口异常"</span>),</span><br><span class="line">    ERROR(<span class="number">1005</span>,<span class="string">"未知错误"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    ResultCode(<span class="keyword">int</span> code, String msg)&#123;</span><br><span class="line">        <span class="keyword">this</span>.code=code;</span><br><span class="line">        <span class="keyword">this</span>.msg=msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Mapper">Mapper</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CustomerMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Customer&gt; <span class="title">getAllCustomer</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Customer <span class="title">getCustomerByName</span><span class="params">(@Param(<span class="string">"name"</span>)</span> String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Integer <span class="title">addCustomer</span><span class="params">(@Param(<span class="string">"customer"</span>)</span> Customer customer)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Integer <span class="title">updateCustomer</span><span class="params">(@Param(<span class="string">"customer"</span>)</span> Customer customer)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Integer <span class="title">deleteAllCustomer</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Integer <span class="title">deleteCustomerById</span><span class="params">(@Param(<span class="string">"id"</span>)</span>Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>mybatis</code>中使用<code>mapper</code>进行实体类与数据库数据的映射</p>
<ol>
<li>
<p>我们创建<code>Mapper</code>接口（使用<code>@Mapper</code>标识），定义相关功能方法。</p>
<blockquote>
<p>方法中若有多个参数，使用<code>@Param(&quot;&quot;)</code>标识参数名称，若只有一个参数可以不用添加。</p>
<p>可以在启动类上添加<code>@MapperScan(&quot;mapper放置的位置&quot;)</code>省去<code>@Mapper</code>注释</p>
</blockquote>
</li>
<li>
<p>创建与<code>Mapper</code>接口对应的<code>mapper.xml</code>文件</p>
<blockquote>
<p><code>mapper.xml</code>文件一般建立在<code>main/resources/mapper</code>中</p>
</blockquote>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span>        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span>        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.cwh.springboot.springboot_mybatis.dao.mapper.CustomerMapper"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    构建映射map--&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span> =<span class="string">"CustomerMap"</span> <span class="attr">type</span>=<span class="string">"com.cwh.springboot.springboot_mybatis.dao.entity.Customer"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--   id标明为主键 column标明数据库中对应列明 property标明实体类中属性 --&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">javaType</span>=<span class="string">"Long"</span> /&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">javaType</span>=<span class="string">"String"</span> /&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"age"</span> <span class="attr">property</span>=<span class="string">"age"</span> <span class="attr">javaType</span>=<span class="string">"Integer"</span>/&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"create_time"</span> <span class="attr">property</span>=<span class="string">"createTime"</span> <span class="attr">javaType</span>=<span class="string">"Date"</span> /&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"modify_time"</span> <span class="attr">property</span>=<span class="string">"modifyTime"</span> <span class="attr">javaType</span>=<span class="string">"Date"</span>/&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    自定义sql语句，避免重复使用--&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"Customer_po"</span>&gt;</span>        id , name ,age    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span>    </span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getAllCustomer"</span> <span class="attr">resultMap</span>=<span class="string">"CustomerMap"</span>&gt;</span>        </span><br><span class="line">        select * from customer;    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span>    </span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getCustomerByName"</span> <span class="attr">resultMap</span>=<span class="string">"CustomerMap"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.String"</span>&gt;</span>        </span><br><span class="line">        select * from customer where name=#&#123;name&#125;;    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span>    </span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"addCustomer"</span>  <span class="attr">parameterType</span>=<span class="string">"Customer"</span>&gt;</span>        </span><br><span class="line">        insert into customer (name, age ,create_time,modify_time)        </span><br><span class="line">        values(#&#123;customer.name&#125;,#&#123;customer.age&#125;,now(),now());    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span>    </span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateCustomer"</span> <span class="attr">parameterType</span>=<span class="string">"Customer"</span>&gt;</span>        </span><br><span class="line">        update customer        </span><br><span class="line">        set name =#&#123;customer.name&#125;,age =#&#123;customer.age&#125;,modify_time =now()       </span><br><span class="line">        where id = #&#123;customer.id&#125;;    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteAllCustomer"</span> &gt;</span>        </span><br><span class="line">        delete from customer;    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span>    </span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteCustomerById"</span>  <span class="attr">parameterType</span>=<span class="string">"Integer"</span>&gt;</span>        </span><br><span class="line">        delete from customer where id=#&#123;id&#125;;    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;mapper namespace=...&gt;</code>：为该<code>mapper.xml</code>对应的<code>mapper</code>接口的地址</p>
<p><code>&lt;resultMap&gt;&lt;/resultMap&gt;</code>：为一个映射对象，我们在这里面实现映射</p>
<p>​	<code>type</code>：为对应实体类</p>
<p>​	<code>&lt;id  &gt;</code> : 数据库中主键</p>
<p>​	<code>column</code>：数据库中对应列名</p>
<p>​	<code>property</code>：对应实体类属性</p>
<p>​	<code>javaType</code>：对应属性类型</p>
<p><code>&lt;sql id=&quot;name&quot;&gt;&lt;/sql&gt;</code>：定义sql语句，后面可以使用<code>&lt;include refid=&quot;name&quot;/&gt;</code>引入，避免重复使用</p>
<p><code>&lt;select/update/delete/insert&gt;</code>：即标明对应的<code>CRUD</code>操作，内容为具体的<code>sql</code>语句</p>
<p>​	<code>id</code> ：对应<code>mapper</code>接口中方法名字</p>
<p>​	<code>parameterType</code>：参数类型</p>
<p>​	<code>resultType</code>：返回类型</p>
<p>​	<code>resultMap</code>：也是返回映射关系，用于返回一个实体类</p>
<blockquote>
<p><code>resultType</code> 一般用于返回单个值，也可以返回实体类，但需要开启驼峰匹配</p>
</blockquote>
<p>​	<code>#{name}</code>：传参</p>
<blockquote>
<p>传入的是实体类对象时，使用<code>#{customer.age}</code>传入属性值</p>
</blockquote>
<h4 id="Service">Service</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CustomerService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Customer&gt; <span class="title">getAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Customer <span class="title">searchByName</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">add</span><span class="params">(Customer customer)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">update</span><span class="params">(Customer customer)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">deleteAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">deleteById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ServiceImpl">ServiceImpl</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerServiceImpl</span> <span class="keyword">implements</span> <span class="title">CustomerService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CustomerMapper customerMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Customer&gt; <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customerMapper.getAllCustomer();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Customer <span class="title">searchByName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customerMapper.getCustomerByName(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">add</span><span class="params">(Customer customer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customerMapper.addCustomer(customer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">update</span><span class="params">(Customer customer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customerMapper.updateCustomer(customer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">deleteAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customerMapper.deleteAllCustomer();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">deleteById</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customerMapper.deleteCustomerById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>serviceimpl</code>还是和<code>spring-data-jpa</code>类似，注入<code>Dao</code>层映射对象，调用<code>mapper</code>完成相应操作</p>
<h4 id="Controller">Controller</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/customer"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerController</span> </span>&#123;    </span><br><span class="line">    <span class="meta">@Autowired</span>    </span><br><span class="line">    <span class="keyword">private</span> CustomerService customerService;    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"getall"</span>)    </span><br><span class="line">    <span class="keyword">public</span> ResultVO&lt;List&lt;Customer&gt;&gt; getAll()&#123;        </span><br><span class="line">        List&lt;Customer&gt; customerArrayList = customerService.getAll();        </span><br><span class="line">        LinkedList&lt;CustomerVO&gt; customerVOLinkedList = <span class="keyword">new</span> LinkedList();        </span><br><span class="line">        <span class="keyword">for</span>(Customer customer:customerArrayList)&#123;            </span><br><span class="line">            CustomerVO customerVO = <span class="keyword">new</span> CustomerVO(customer);            </span><br><span class="line">            customerVOLinkedList.add(customerVO);        </span><br><span class="line">        &#125;        </span><br><span class="line">        </span><br><span class="line">        ResultVO&lt;List&lt;Customer&gt;&gt; resultVO = <span class="keyword">new</span> ResultVO(customerVOLinkedList);   </span><br><span class="line">        <span class="keyword">return</span> resultVO;    &#125;    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/add"</span>)    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResultVO <span class="title">add</span><span class="params">(@RequestParam(<span class="string">"name"</span>)</span>String name, @<span class="title">RequestParam</span><span class="params">(<span class="string">"age"</span>)</span>Integer age)</span>&#123;        </span><br><span class="line">        Customer customer = <span class="keyword">new</span> Customer();        </span><br><span class="line">        customer.setName(name);        </span><br><span class="line">        customer.setAge(age);        </span><br><span class="line">        customerService.add(customer);        </span><br><span class="line">        ResultVO resultVO = <span class="keyword">new</span> ResultVO();        </span><br><span class="line">        <span class="keyword">return</span> resultVO;    </span><br><span class="line">    &#125;    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/search"</span>)    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResultVO <span class="title">searchByName</span><span class="params">(@RequestParam(<span class="string">"name"</span>)</span>String name)</span>&#123;        </span><br><span class="line">        Customer customer = customerService.searchByName(name);        </span><br><span class="line">        ResultVO resultVO = <span class="keyword">new</span> ResultVO(<span class="keyword">new</span> CustomerVO(customer));       </span><br><span class="line">        <span class="keyword">return</span> resultVO;    </span><br><span class="line">    &#125;    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PutMapping</span>(<span class="string">"/update"</span>)    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResultVO  <span class="title">updateById</span><span class="params">(@RequestParam(<span class="string">"id"</span>)</span>Long id,@<span class="title">RequestParam</span><span class="params">(<span class="string">"name"</span>)</span>String name,@<span class="title">RequestParam</span><span class="params">(<span class="string">"age"</span>)</span> Integer age)</span>&#123;        </span><br><span class="line">        Customer customer = <span class="keyword">new</span> Customer();        </span><br><span class="line">        customer.setId(id);        </span><br><span class="line">        customer.setAge(age);        </span><br><span class="line">        customer.setName(name);        </span><br><span class="line">        customerService.update(customer);        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResultVO();    &#125;    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/delete"</span>)    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResultVO <span class="title">deleteAll</span><span class="params">()</span></span>&#123;        </span><br><span class="line">        customerService.deleteAll();        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResultVO();    </span><br><span class="line">    &#125;    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@DeleteMapping</span>(value = <span class="string">"/delete"</span>,params = &#123;<span class="string">"id"</span>&#125;)    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResultVO <span class="title">deleteById</span><span class="params">(@RequestParam(value = <span class="string">"id"</span>,required = <span class="keyword">true</span>)</span>Integer id)</span>&#123;        </span><br><span class="line">        customerService.deleteById(id);        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResultVO();    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Controller</code>完成简单的<code>CRUD</code>操作，都很简单，就不详细说明</p>
<blockquote>
<p>我们可以发现<code>deleteAll()</code>和<code>deleteById</code>都是匹配的<code>/customer/delete</code>这个<code>url</code></p>
<p>但是我们想根据不同的参数对象匹配不同的方法</p>
<p>我们只需要在<code>DeleteMapping</code>中设置<code>params ={&quot;&quot;}</code>即可，设定之后参数就是必须需要的。</p>
</blockquote>
<h4 id="运行结果">运行结果</h4>
<h5 id="GET-getall"><code>GET</code>  <code>/getall</code></h5>
<img src="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162522.png" style="zoom:80%;" />
<h5 id="POST-add"><code>POST</code> <code>/add</code></h5>
<img src="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162359.png" style="zoom:80%;" />
<h5 id="GET-search"><code>GET</code> <code>/search</code></h5>
<img src="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162448.png" style="zoom:80%;" />
<h5 id="PUT-update"><code>PUT</code> <code>/update</code></h5>
<img src="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162623.png" style="zoom:80%;" />
<img src="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162720.png" style="zoom:80%;" />
<h5 id="DELETE-delete"><code>DELETE</code> <code>/delete</code></h5>
<img src="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162905.png" style="zoom:80%;" />
<img src="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162930.png" style="zoom:80%;" />
<h5 id="DELETE-delete-id"><code>DELETE</code>  <code>/delete?id=</code></h5>
<img src="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162823.png" style="zoom:80%;" />
<img src="https://typora-cwh.oss-cn-hangzhou.aliyuncs.com/20210608162839.png" style="zoom:80%;" />
<h3 id="总结">总结</h3>
<p><code>mybatis</code>与<code>spring data jpa</code>相比，更加贴近原生<code>sql</code>,所以对于数据库的复杂操作更加方便，但是简单的<code>CRUD</code>就显得有点过于复杂。</p>
<p>所以我们接下来就要学习<code>mybatis</code>的增强<code>mybatis-plus</code>。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/springboot/" rel="tag"># springboot</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/06/15/SpringBoot%E6%95%B4%E5%90%88JPA/" rel="prev" title="SpringBoot整合JPA">
      <i class="fa fa-chevron-left"></i> SpringBoot整合JPA
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/06/15/SpringBoot%E6%95%B4%E5%90%88mybatis-plus/" rel="next" title="SpringBoot整合mybatis-plus">
      SpringBoot整合mybatis-plus <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#"><span class="nav-number">1.</span> <span class="nav-text">Springboot 整合 Mybatis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#简介"><span class="nav-number">1.0.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用示例"><span class="nav-number">1.0.2.</span> <span class="nav-text">使用示例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#建表"><span class="nav-number">1.0.2.0.1.</span> <span class="nav-text">建表</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pom-xml"><span class="nav-number">1.0.2.1.</span> <span class="nav-text">pom.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#application-yml"><span class="nav-number">1.0.2.2.</span> <span class="nav-text">application.yml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Entity"><span class="nav-number">1.0.2.3.</span> <span class="nav-text">Entity</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#VO"><span class="nav-number">1.0.2.4.</span> <span class="nav-text">VO</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#ResultVO"><span class="nav-number">1.0.2.4.1.</span> <span class="nav-text">ResultVO</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CustomerVO"><span class="nav-number">1.0.2.4.2.</span> <span class="nav-text">CustomerVO</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mapper"><span class="nav-number">1.0.2.5.</span> <span class="nav-text">Mapper</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Service"><span class="nav-number">1.0.2.6.</span> <span class="nav-text">Service</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ServiceImpl"><span class="nav-number">1.0.2.7.</span> <span class="nav-text">ServiceImpl</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Controller"><span class="nav-number">1.0.2.8.</span> <span class="nav-text">Controller</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#运行结果"><span class="nav-number">1.0.2.9.</span> <span class="nav-text">运行结果</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#GET-getall"><span class="nav-number">1.0.2.9.1.</span> <span class="nav-text">GET  &#x2F;getall</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#POST-add"><span class="nav-number">1.0.2.9.2.</span> <span class="nav-text">POST &#x2F;add</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#GET-search"><span class="nav-number">1.0.2.9.3.</span> <span class="nav-text">GET &#x2F;search</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#PUT-update"><span class="nav-number">1.0.2.9.4.</span> <span class="nav-text">PUT &#x2F;update</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DELETE-delete"><span class="nav-number">1.0.2.9.5.</span> <span class="nav-text">DELETE &#x2F;delete</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DELETE-delete-id"><span class="nav-number">1.0.2.9.6.</span> <span class="nav-text">DELETE  &#x2F;delete?id&#x3D;</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结"><span class="nav-number">1.0.3.</span> <span class="nav-text">总结</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Wanghui Cai"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Wanghui Cai</p>
  <div class="site-description" itemprop="description">一些零零散散的学习总结</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/bigmoom" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;bigmoom" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:15850180970@163.com" title="E-Mail → mailto:15850180970@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
  <div class="beian"><a href="https://beian.miit.gov.cn/#/Integrated/index" rel="noopener" target="_blank">苏ICP备20010524 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Wanghui Cai</span>
</div>




        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->















  

  

  

</body>
</html>
